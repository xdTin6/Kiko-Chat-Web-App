<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<title>KikoChat</title>

<style>
/* ---------------- Base + Gradient BG ---------------- */
*{box-sizing:border-box;margin:0;padding:0;font-family:"Inter",system-ui,sans-serif;}
body,html{height:100%;overflow:hidden;}
body{
  background:linear-gradient(-45deg,#1e1e2f,#232346,#0b0d10,#111827);
  background-size:400% 400%;animation:gradientMove 18s ease infinite;
  display:flex;align-items:center;justify-content:center;color:#fff;
}
@keyframes gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

/* ---------------- Shared Glass Style ---------------- */
#mainWrap,#loginCard,.panel{
  backdrop-filter:blur(20px) saturate(160%);
  -webkit-backdrop-filter:blur(20px) saturate(160%);
  background:rgba(255,255,255,0.08);
  border-radius:20px;border:1px solid rgba(255,255,255,0.15);
  box-shadow:0 6px 25px rgba(0,0,0,0.35);
}

/* ---------------- Login ---------------- */
#loginPane{display:flex;align-items:center;justify-content:center;width:100%;height:100%}
#loginCard{padding:32px;width:360px;text-align:center}
.logoWrap{display:flex;align-items:center;gap:12px;justify-content:center;margin-bottom:20px}
.logoCat{width:64px;height:64px;border-radius:20px;background:#5b9dff;display:flex;align-items:center;justify-content:center;font-size:34px;animation:bounce 2.5s infinite;}
@keyframes bounce{0%,20%,50%,80%,100%{transform:translateY(0)}40%{transform:translateY(-10px)}60%{transform:translateY(-5px)}}
.logoText{font-size:28px;font-weight:800;letter-spacing:1px}
#loginCard input{width:100%;padding:12px;margin:8px 0;border:none;border-radius:18px;background:rgba(255,255,255,.12);color:#fff;font-size:15px;outline:none;}
#loginCard button{margin-top:12px;width:100%;padding:12px;border:none;border-radius:18px;background:#5b9dff;color:#fff;font-weight:600;cursor:pointer;transition:.25s;}
#loginCard button:hover{background:#4786e6;}

/* ---------------- Chat Layout ---------------- */
#mainWrap{width:100%;height:100vh;display:grid;grid-template-columns:260px 1fr;gap:0;}

/* Sidebar */
.leftPanel{display:flex;flex-direction:column;overflow:hidden}
#usersList{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
.userItem{display:flex;align-items:center;gap:10px;padding:8px 10px;border-radius:16px;cursor:pointer;transition:.2s;}
.userItem:hover{background:rgba(255,255,255,0.08);}
.miniAvatar{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;background:#5b9dff;}
.userName{font-weight:600;}
.userStatus{font-size:12px;color:#aaa}

/* Chat window */
.rightPanel{display:flex;flex-direction:column;position:relative;}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid rgba(255,255,255,0.1);}
.topbar .menuBtn{display:none;font-size:22px;cursor:pointer}
#messages{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:10px;}

/* Chat bubbles */
.msgRow{display:flex;gap:8px;align-items:flex-end;}
.msgRow.me{justify-content:flex-end;}
.bubble{
  max-width:70%;padding:10px 14px;border-radius:18px;position:relative;
  box-shadow:0 2px 6px rgba(0,0,0,0.25);
}
.msgRow.me .bubble{background:#5b9dff;color:#fff;border-bottom-right-radius:4px;}
.msgRow.other .bubble{background:rgba(255,255,255,.12);border-bottom-left-radius:4px;}
.meta{font-size:11px;color:#bbb;margin-bottom:4px}
.chat-img,.chat-video{max-width:100%;border-radius:12px;margin-top:6px}
.ticks{font-size:12px;opacity:0.9;text-align:right;margin-top:4px}

/* Composer */
.composer{display:flex;align-items:center;gap:8px;padding:8px 12px;border-top:1px solid rgba(255,255,255,0.1);}
.composer input{flex:1;padding:12px;border:none;border-radius:20px;background:rgba(255,255,255,0.12);color:#fff;font-size:15px;}
.composer button{padding:12px;border:none;border-radius:50%;background:#5b9dff;color:#fff;font-size:16px;cursor:pointer;}
.composer button:hover{background:#4786e6;}

/* ---------------- Mobile (WhatsApp-like) ---------------- */
@media(max-width:768px){
  #mainWrap{grid-template-columns:1fr}
  .leftPanel{position:absolute;top:0;left:-100%;width:80%;height:100%;z-index:10;transition:.3s}
  .leftPanel.open{left:0;}
  .topbar .menuBtn{display:block}
}
</style>
</head>
<body>

<!-- Login -->
<div id="loginPane">
  <div id="loginCard">
    <div class="logoWrap"><div class="logoCat">üê±</div><div class="logoText">KikoChat</div></div>
    <input id="usernameLogin" placeholder="Username"/>
    <input id="passLogin" type="password" placeholder="Passcode"/>
    <button onclick="Kiko.login(usernameLogin.value,passLogin.value)">Login</button>
  </div>
</div>

<!-- Chat -->
<div id="mainWrap" style="display:none">
  <div class="leftPanel panel" id="sidebar">
    <div id="usersList"></div>
    <div id="adminPanel" style="display:none;padding:10px">
      <input id="newUsername" placeholder="username"/><input id="newPass" placeholder="pass"/>
      <button onclick="Kiko.createUser(newUsername.value,newPass.value)">+User</button>
      <button onclick="Kiko.createUser(newUsername.value,newPass.value,'admin')">+Admin</button>
      <button onclick="Kiko.clearChat()">Clear Chat</button>
    </div>
  </div>

  <div class="rightPanel panel">
    <div class="topbar">
      <span class="menuBtn" onclick="toggleSidebar()">‚ò∞</span>
      <div><strong id="meName"></strong> <span id="meRole" style="color:#bbb;font-size:13px"></span></div>
      <button style="background:#ff4d6d;padding:6px 12px;border-radius:14px;border:none;color:#fff;cursor:pointer;" onclick="localStorage.clear();location.reload()">Logout</button>
    </div>
    <div id="messages"></div>
    <div class="composer">
      <button onclick="fileInput.click()">üìé</button>
      <input id="textInput" placeholder="Type a message..."/>
      <button onclick="Kiko.sendTextMessage(textInput.value);textInput.value=''">‚û§</button>
      <input type="file" id="fileInput" accept="image/*,video/*" hidden/>
    </div>
  </div>
</div>

<script>
function toggleSidebar(){document.getElementById("sidebar").classList.toggle("open");}
fileInput.onchange=()=>{if(fileInput.files[0])Kiko.uploadAndSendFile(fileInput.files[0])}
</script>

<!-- Keep your Firebase JS code here (same as previous version) -->
</body>
</html>
